<!DOCTYPE HTML><html>
<head>
  <title>Enable X Slice Cafe Digital Oven</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:,">
  <link rel="stylesheet" type="text/css" href="style.css">
<title>ESP Web Server</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="data:,">
</head>
<body>
  <div class="topnav">
    <h1 class="topnav name">Enable X Slice Cafe Digital Oven</h1>
  </div>
  <div class="content">
    <div class="card" id="content">
      <h2 class="statusstate">Status: </h2>
      <p class="state">Function: Top and bottom heat</p>
      <p class="state state-temperature">Temp(°C): 122/120</p>
      <p class="state state-duration">Duration(mins): 30/55</p>
    </div>

    <div class="buttons">
      <div class="toprow">
        <div class="firstSet" id="firstSet" onclick="selectfirst()">
          <div class="first">
            <div class="buttonInner">
              <h2 class="titles"> Fermentation </h2>
              <input class="function" id= "function1" type="number" min="1" max="5" value=%defaultF1%>
              <h2 class="descriptions fermentationdescription">60°C</h2>
              <input class="temperature" id= "temperature1" type="number" min="1" max="100" value=%defaultT1%>
              <h2 class="descriptions">45 min</h2>
              <input class = "duration"  id= "duration1" type="number" min="1" max="100" value=%defaultD1%>
              <h2></h2>
            </div>
          </div>
        </div>
        <div class="secondSet" id="secondSet" onclick="selectsecond()">
          <div class="second">
            <div class="buttonInner">
              <h2 class="titles"> Top&Btm Heat </h2>
              <input class="function" id= "function2" type="number" min="1" max="5" value=%defaultF2%>
                <h2 class="descriptions">60°C</h2>
                <input class="temperature"  id= "temperature2" type="number" min="1" max="100" value=%defaultT2%>
                <h2 class="descriptions">45 min</h2>
                <input class="duration"  id= "duration2" type="number" min="1" max="100" value=%defaultD2%>
              <h2></h2>
            </div>
          </div>
        </div>
      </div>  
      <div class="bottomrow" >
        <div class="thirdSet" id ="thirdSet" onclick="selectthird()">
          <div class="third">
            <div class="buttonInner">
              <h2 class="titles"> Top & Rotisserie </h2>
              <input class="function" id= "function3" type="number" min="1" max="5" value=%defaultF3%>
                <h2 class="descriptions">60°C</h2>
                <input class="temperature"  id= "temperature3" type="number" min="1" max="100" value=%defaultT3%>
                <h2 class="descriptions">45 min</h2>
                <input class="duration"  id= "duration3" type="number" min="1" max="100"  value=%defaultD3%>
              <h2></h2>
            </div>
          </div>
        </div>
        <div class="fourthSet" id="fourthSet" onclick="selectfourth()">
          <div class="fourth">
            <div class="buttonInner">
              <h2 class="titles"> Top, Btm & Fan </h2>
              <input class="function" id= "function4" type="number" min="1" max="5" value=%defaultF4%>
                <h2 class="descriptions">60°C</h2>
                <input  class="temperature" id= "temperature4" type="number" min="1" max="100" value=%defaultT4%>
                <h2 class="descriptions">45 min</h2>
                <input  class="duration" id= "duration4" type="number" min="1" max="100" value=%defaultD4%>
              <h2></h2>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="bottomnav" id="defaultbottomnav">
    <div class="playbutton">
      <svg class="playbuttonicon" xmlns="http://www.w3.org/2000/svg"class="w-6 h-20" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" />
      </svg> 
    </div>
    <div class="settingsbutton" onclick="hideblock()">
      <svg class="settingsbuttonicon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
      </svg>      
    </div>     
  </div>
  <div class="alternatebottomnav" id="alternatebottomnav">
    <div class="backbutton" onclick="hideblock()">
      <svg class="backbuttonicon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" />
      </svg>
    </div>
    <div class="savebutton" onclick=toggleSave()>
      <div class="savebuttonicon">
        <svg class = "savebuttonicon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0120.25 6v12A2.25 2.25 0 0118 20.25H6A2.25 2.25 0 013.75 18V6A2.25 2.25 0 016 3.75h1.5m9 0h-9" />
        </svg>
      </div>
      
    </div>
  </div>
<script>
  var gateway = `ws://${window.location.hostname}/ws`; //gets the webserver IP address
  var websocket;
  let temperatureInput1 = true;
  let temperatureInput2 = true;
  let temperatureInput3 = true;
  let temperatureInput4 = true;
  window.addEventListener('load', onLoad); //adds listeners to it
  function initWebSocket() {
    console.log('Trying to open a WebSocket connection...');
    websocket = new WebSocket(gateway);
    websocket.onopen    = onOpen;
    websocket.onclose   = onClose;
    websocket.onmessage = onMessage; 
  }
  function onOpen(event) {
    console.log('Connection opened');
  }
  function onClose(event) {
    console.log('Connection closed');
    setTimeout(initWebSocket, 2000);
  }
  function onMessage(event) { //Handles incoming message from the server (esp32 board)
    var state;
    console.log(event);
    // if (event.data == "1"){
    //   state = "ON";
    // }
    // else{
    //   state = "OFF";
    // }
    // document.getElementById('state').innerHTML = state;
  }
  function onLoad(event) {
    initWebSocket();
    initButton();
  }
  function initButton() {
    document.getElementById('button').addEventListener('click', toggle);
    // document.getElementById('firstbutton').addEventListener('click', toggle1);
    // document.getElementById('secondbutton').addEventListener('click', toggle2);
    // document.getElementById('thirdbutton').addEventListener('click', toggle3);
    // document.getElementById('fourthbutton').addEventListener('click', toggle4);
    document.getElementById('saveButton').addEventListener('click', toggleSave);

    document.getElementById('setting1').addEventListener('click', () => {
      temperatureInput1 = !temperatureInput1;
      document.getElementById('temperature1').disabled= temperatureInput1;
      document.getElementById('duration1').disabled= temperatureInput1;
      document.getElementById('function1').disabled= temperatureInput1;
    });
    document.getElementById('setting2').addEventListener('click', () => {
      temperatureInput2 = !temperatureInput2;
      document.getElementById('temperature2').disabled= temperatureInput2;
      document.getElementById('duration2').disabled= temperatureInput2;
      document.getElementById('function2').disabled= temperatureInput2;
    });
    document.getElementById('setting3').addEventListener('click', () => {
      temperatureInput3 = !temperatureInput3;
      document.getElementById('temperature3').disabled= temperatureInput3;
      document.getElementById('duration3').disabled= temperatureInput3;
      document.getElementById('function3').disabled= temperatureInput3;
    });
    document.getElementById('setting4').addEventListener('click', () => {
      temperatureInput4 = !temperatureInput4;
      document.getElementById('temperature4').disabled= temperatureInput4;
      document.getElementById('duration4').disabled= temperatureInput4;
      document.getElementById('function4').disabled= temperatureInput4;
    });
  }
  function toggle(){
    //console.log("toggle");
    websocket.send("toggle");
  }
  // function toggle1(){
  //   var temp = document.getElementById("temperature1").value;
  //   var duration = document.getElementById("duration1").value;
  //   var func = document.getElementById("function1").value;
  //   var value= temp+','+duration+','+func
  //   // console.log(value);
  //   websocket.send(value);
  // }
  // function toggle2(){
  //   var temp = document.getElementById("temperature2").value;
  //   var duration = document.getElementById("duration2").value;
  //   var func = document.getElementById("function2").value;
  //   var value= temp+','+duration+','+func
  //   //console.log(value);
  //   websocket.send(value);
  // }
  // function toggle3(){
  //   var temp = document.getElementById("temperature3").value;
  //   var duration = document.getElementById("duration3").value;
  //   var func = document.getElementById("function3").value;
  //   var value= temp+','+duration+','+func
  //   //console.log(value);
  //   websocket.send(value);
  // }
  // function toggle4(){
  //   var temp = document.getElementById("temperature4").value;
  //   var duration = document.getElementById("duration4").value;
  //   var func = document.getElementById("function4").value;
  //   var value= temp+','+duration+','+func
  //   //console.log(value);
  //   websocket.send(value);
  // }
  function toggleSave(){
    var temp1 = document.getElementById("temperature1").value;
    var duration1 = document.getElementById("duration1").value;
    var func1 = document.getElementById("function1").value;
    var temp2 = document.getElementById("temperature2").value;
    var duration2 = document.getElementById("duration2").value;
    var func2 = document.getElementById("function2").value;
    var temp3 = document.getElementById("temperature3").value;
    var duration3 = document.getElementById("duration3").value;
    var func3 = document.getElementById("function3").value;
    var temp4 = document.getElementById("temperature4").value;
    var duration4 = document.getElementById("duration4").value;
    var func4 = document.getElementById("function4").value;
    // websocket.send(`save,${temp1}\n${duration1}\n${func1}\n${temp2}\n${duration2}\n${func2}\n${temp3}\n${duration3}\n${func3}\n${temp4}\n${duration4}\n${func4}`);
    hideblock();

  }

function hideblock(){
  let x=  document.getElementById("content");
  let y= document.getElementById("defaultbottomnav");
  let z= document.getElementById("alternatebottomnav");
  let temperature1 =document.getElementById("temperature1");
  let temperature2 =document.getElementById("temperature2");
  let temperature3 =document.getElementById("temperature3");
  let temperature4 =document.getElementById("temperature4");
  let duration1 = document.getElementById("duration1");
  let duration2 = document.getElementById("duration2");
  let duration3 = document.getElementById("duration3");
  let duration4 = document.getElementById("duration4");
  let function1 = document.getElementById("function1");
  let function2 = document.getElementById("function2");
  let function3 = document.getElementById("function3");
  let function4 = document.getElementById("function4");
  if(x.style.display=="none"){
    x.style.display="block";
    y.style.display="flex";
    z.style.display="none";
    temperature1.style.display="none"
    temperature2.style.display="none"
    temperature3.style.display="none"
    temperature4.style.display="none"
    duration1.style.display="none";
    duration2.style.display="none";
    duration3.style.display="none";
    duration4.style.display="none";
    function1.style.display="none";
    function2.style.display="none";
    function3.style.display="none";
    function4.style.display="none";
  }
  else{
    x.style.display="none";
    y.style.display="none";
    z.style.display="flex";
    temperature1.style.display="block";
    temperature2.style.display="block";
    temperature3.style.display="block";
    temperature4.style.display="block";
    duration1.style.display="block";
    duration2.style.display="block";
    duration3.style.display="block";
    duration4.style.display="block";
    function1.style.display="block";
    function2.style.display="block";
    function3.style.display="block";
    function4.style.display="block";
  }
}
function resetall(){
  let box1 = document.getElementById("firstSet");
  let box2 = document.getElementById("secondSet");
  let box3 = document.getElementById("thirdSet");
  let box4 = document.getElementById("fourthSet");
  box1.style.backgroundColor="#FFB52E";
  box2.style.backgroundColor="#A668A6";
  box3.style.backgroundColor="#F7A4A4";
  box4.style.backgroundColor="#10BBE5";
} 
function selectfirst(){
  let x = document.getElementById("firstSet");
  let y=window.getComputedStyle(x);
  let z = y.getPropertyValue("background-color");
  if(z === "rgb(255, 181, 46)"){
    resetall();
    x.style.backgroundColor="green";
    let temperature = document.getElementById("temperature1").innerText;
    let duration = document.getElementById("duration1").innerText;
    websocket.send("function,1," + temperature + "," + duration);
  }
  else{
    resetall();
  }
}
function selectsecond(){
  let x = document.getElementById("secondSet");
  let y=window.getComputedStyle(x);
  let z = y.getPropertyValue("background-color");
  if(z === "rgb(166, 104, 166)"){
    resetall();
    x.style.backgroundColor="green";
  }
  else{
    resetall();
  }
}
function selectthird(){
  let x = document.getElementById("thirdSet");
  let y=window.getComputedStyle(x);
  let z = y.getPropertyValue("background-color");
  if(z === "rgb(247, 164, 164)"){
    resetall();
    x.style.backgroundColor="green";
  }
  else{
    resetall();
  }
}
function selectfourth(){
  let x = document.getElementById("fourthSet");
  let y=window.getComputedStyle(x);
  let z = y.getPropertyValue("background-color");
  if(z === "rgb(16, 187, 229)"){
    resetall();
    x.style.backgroundColor="green";
  }
  else{
    resetall();
  }
}


</script>
</body>
</html>
